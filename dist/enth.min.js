let z=[],D=!1,I=[],ea=(f,c)=>{let d=0;for(let l=f.length;d<l;d++){for(;0<I.length;)I.shift()();const k=Date.now()-c,[n,h]=f[d];if(c>=h||17>k)n();else break}return f.slice(d)},fa=()=>{const f=Date.now();for(z=ea(z.sort((c,d)=>c[1]<d[1]?-1:1),f);0<I.length;)I.shift()();0<z.length?requestAnimationFrame(fa):D=!1},J=(f,c=5E3)=>{if(0===c)D?I.push(f):f();else return new Promise(d=>{z.push([()=>{f();d()},Date.now()+c]);D||(requestAnimationFrame(fa),D=!0)});return Promise.resolve()},pa=new WeakSet;
function N(f,c,d={}){let l=!1,k=()=>{l&&c()};Object.keys(f).forEach(h=>{"object"!==typeof f[h]||pa.has(f[h])||(f[h]=N(f[h],c))});let n=new Proxy(f,{get:(h,m)=>{d.get&&d.get(h,m);return h[m]},set:(h,m,v)=>{d.set&&(v=d.set(h,m,v));"object"!==typeof v||pa.has(v)||(v=N(v,k));h[m]===v&&l||(h[m]=v,l&&c());h[m]=v;return!0}});pa.add(n);l=!0;return n}
let qa=f=>{let c=[],d=!0;const l=N({...f,C:k=>{c.push(k);return()=>{const n=c.indexOf(k);-1<n&&c.splice(n,1)}},la:k=>{const n=h=>{Object.keys(h).forEach(m=>{["on","merge"].includes(m)||(l[m]=h[m])})};k.C(h=>{n(h)});d=!1;n(k);d=!0}},()=>{d&&c.forEach(k=>k(l))});return l};var O,P=void 0;
(O=(P={w:{}},function(f,c){function d(a){if(!a)throw Error("Expected value to be defined");return a}function l(a){if(!ha)throw Error("Cannot call "+a+"() unless in patch.");}function k(a){if(R)throw Error(a+"() can not be called between elementOpenStart() and elementOpenEnd().");}function n(a){if(ia)throw Error(a+"() may not be called inside an element that has called skip().");}function h(a){if(!R)throw Error(a+"() can only be called after calling elementOpenStart().");}function m(a){let b=R;R=a;
return b}function v(a){let b=ia;ia=a;return b}function u(){}function y(a,b){for(;a.length>b;)a.pop()}function H(a,b,e){if(null==e)a.removeAttribute(b);else{let g=0===b.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===b.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":null;g?a.setAttributeNS(g,b,String(e)):a.setAttribute(b,String(e))}}function x(a,b,e){(S[b]||S[ja.default])(a,b,e)}function ka(a,b,e,g){b=new $a(b,e,g);return a.__incrementalDOMData=b}function C(a,b){if(a.__incrementalDOMData)return a.__incrementalDOMData;
var e=1===a.nodeType?a.localName:a.nodeName,g=ta;g=1===a.nodeType&&null!=g?a.getAttribute(g):null;b=ka(a,e,1===a.nodeType?g||b:null);if(1===a.nodeType&&(e=a.attributes,g=e.length)){a=b.l(g);for(let q=0,t=0;q<g;q+=1,t+=2){let p=e[q],A=p.value;a[t]=p.name;a[t+1]=A}}return b}function ua(a){C(a);for(a=a.firstChild;a;a=a.nextSibling)ua(a)}function va(a){a.__incrementalDOMData=null;for(a=a.firstChild;a;a=a.nextSibling)va(a)}function wa(a,b,e,g,q){return b==e&&g==q}function xa(a,b,e){for(;b!==e;){let g=
b.nextSibling;a.removeChild(b);E.O(b);b=g}}function aa(){return r?r.nextSibling:w.firstChild}function ya(){xa(w,aa(),null);r=w;w=w.parentNode}function za(){r=aa()}function la(a,b){za();a:{if(r){var e=r;do{{var g=e;var q=a,t=b;let p=C(g,t);g=ba(g,q,p.o,t,p.key)}if(g)break a}while(b&&(e=e.nextSibling))}e=null}e||("#text"===a?(a=T.createTextNode(""),ka(a,"#text",null)):(e=T,g=w,e="function"===typeof a?new a:(g="svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/Math/MathML":null==
g||"foreignObject"===C(g,void 0).o?null:g.namespaceURI)?e.createElementNS(g,a):e.createElement(a),ka(e,a,b),a=e),E.N(a),e=a);a=e;if(a!==r){if(0<=ca.indexOf(a))for(b=w,e=a.nextSibling,g=r;null!==g&&g!==a;)q=g.nextSibling,b.insertBefore(g,e),g=q;else w.insertBefore(a,r);r=a}}function Aa(a,b){la(a,b);w=r;r=null;return w}function Ba(){v(!1);ya();return r}function ma(){l("currentElement");k("currentElement");return w}function Ca(a,b={}){let {matches:e=wa}=b;return(g,q,t)=>{const p=E,A=T,da=ca,ab=K,bb=
U,cb=r,db=w,eb=ba;T=g.ownerDocument;E=new fb;ba=e;K=[];U=[];r=null;var L=w=g.parentNode;var F;var G=gb.call(g);if((F=11===G.nodeType||9===G.nodeType?G.activeElement:null)&&g.contains(F)){for(G=[];F!==L;)F=d(F),G.push(F),F=F.parentNode;L=G}else L=[];ca=L;L=m(!1);G=v(!1);ha=null!=E;try{const hb=a(g,q,t);if(R)throw Error("elementOpenEnd() must be called after calling elementOpenStart().");return hb}finally{E.R(),T=A,E=p,ba=eb,K=ab,U=bb,r=cb,w=db,ca=da,m(L),v(G),ha=null!=E}}}function Da(a){return Ca((b,
e,g)=>{w=r=b;r=null;e(g);ya();if(r!==b){e=r;for(g=[];e&&e!==b;)g.push(e.nodeName.toLowerCase()),e=e.parentNode;throw Error("One or more tags were not closed:\n"+g.join("\n"));}return b},a)}function Ea(a){return Ca((b,e,g)=>{let q={nextSibling:b},t,p;t=b.nextSibling;p=b.previousSibling;r=q;e(g);w||console.warn("patchOuter requires the node have a parent if there is a key.");{g=r;e=d(q);g=d(g);let A=g.nextSibling===e.nextSibling&&g.previousSibling===p;if(!(g.nextSibling===t&&g.previousSibling===p||
A||g===e))throw Error("There must be exactly one top level call corresponding to the patched element.");}w&&xa(w,aa(),b.nextSibling);return q===r?null:r},a)}function na(a,b,e,g){B.push(a);B.push(b);B.push(e);B.push(g)}function Fa(a,b){let e=U;{b=b.l(e.length);var g=!b.length;let p=0;for(;p<e.length;p+=2){var q=e[p];if(g)b[p]=q;else if(b[p]!==q)break;let A=e[p+1];if(g||b[p+1]!==A)b[p+1]=A,na(x,a,q,A)}if(p<e.length||p<b.length){for(p=g=p;p<b.length;p+=2)V[b[p]]=b[p+1];for(p=g;p<e.length;p+=2)g=e[p],
q=e[p+1],V[g]!==q&&na(x,a,g,q),b[p]=g,b[p+1]=q,delete V[g];y(b,e.length);for(var t in V)na(x,a,t,void 0),delete V[t]}a=oa;oa=t=B.length;for(b=a;b<t;b+=4)(0,B[b])(B[b+1],B[b+2],B[b+3]);oa=a;y(B,a)}y(e,0)}function Ga(a,b,e){if(!b.F&&(b.F=!0,e&&e.length))if(b.L())for(var g=0;g<e.length;g+=2)x(a,e[g],e[g+1]);else{for(var q=0;q<e.length;q+=2)M[e[q]]=q+1;b=b.l(0);q=0;for(let t=0;t<b.length;t+=2){let p=b[t],A=b[t+1],da=M[p];da?e[da]===A&&delete M[p]:(b[q]=p,b[q+1]=A,q+=2)}y(b,q);for(g in M)x(a,g,e[M[g]]),
delete M[g]}}function Ha(a,b,e){let g=K;k("elementOpenStart");m(!0);g[0]=a;g[1]=b;g[2]=e}function Ia(a,b){let e=U;l("attr");e.push(a);e.push(b)}function Ja(){let a=K;h("elementOpenEnd");m(!1);let b=Aa(a[0],a[1]),e=C(b,void 0);Ga(b,e,a[2]);Fa(b,e);y(a,0);return b}function Ka(a,b,e,...g){k("elementOpen");n("elementOpen");Ha(a,b,e);for(g=3;g<arguments.length;g+=2)Ia(arguments[g],arguments[g+1]);return Ja()}function La(a){k("elementClose");let b=Ba();var e=C(b,void 0).o;if(e!==a)throw Error('Received a call to close "'+
a+'" but "'+e+'" was open.');return b}Object.defineProperty(c,"__esModule",{value:!0});let ta="key",R=!1,ia=!1,ha=!1,ib=Object.prototype.hasOwnProperty;u.prototype=Object.create(null);let ja={default:"__default"},S=new u;S[ja.default]=function(a,b,e){let g=typeof e;"object"===g||"function"===g?a[b]=e:H(a,b,e)};S.style=function(a,b,e){d("style"in a);a=a.style;if("string"===typeof e)a.cssText=e;else{a.cssText="";for(let t in e)if(ib.call(e,t)){b=a;var g=t,q=e[t];0<=g.indexOf("-")?b.setProperty(g,q):
b[g]=q}}};let W={B:null,g:null};class fb{constructor(){this.i=[];this.j=[]}N(a){this.i.push(a)}O(a){this.j.push(a)}R(){W.B&&0<this.i.length&&W.B(this.i);W.g&&0<this.j.length&&W.g(this.j)}}let gb="undefined"!==typeof Node&&Node.prototype.getRootNode||function(){let a=this,b=a;for(;a;)b=a,a=a.parentNode;return b};class $a{constructor(a,b,e){this.h=null;this.F=!1;this.o=a;this.key=b;this.text=e}L(){let a=this.h;return!a||!a.length}l(a){var b;(b=this.h)||(a=Array(a),y(a,0),b=this.h=a);return b}}let E=
null,r=null,w=null,T=null,ca=[],ba=wa,K=[],U=[];f=Da();let jb=Ea(),B=[],oa=0,V=new u,M=new u;c.Z=H;c.aa=function(a,b,e){a[b]=e};c.attributes=S;c.Y=la;c.close=Ba;c.ea=Da;c.fa=Ea;c.ga=ma;c.G=function(){l("currentPointer");k("currentPointer");return aa()};c.open=Aa;c.T=f;c.ma=f;c.na=jb;c.pa=function(){if(null!==r)throw Error("skip() must come before any child declarations inside the current element.");v(!0);r=w.lastChild};c.V=za;c.oa=function(a){ta=a};c.da=va;c.getKey=function(a){d(a.__incrementalDOMData);
return C(a,void 0).key};c.importNode=ua;c.ka=function(a){return!!a.__incrementalDOMData};c.P=W;c.W=ja;c.$=function(){let a=ma(),b=C(a,void 0);Fa(a,b)};c.ba=function(a){let b=ma(),e=C(b,void 0);Ga(b,e,a)};c.ca=Ia;c.H=La;c.I=Ka;c.ha=Ja;c.ia=Ha;c.ja=function(a,b,e,...g){Ka.apply(null,arguments);return La(a)};c.key=function(a){let b=K;h("key");d(b);b[1]=a};c.text=function(a,...b){k("text");n("text");la("#text",null);b=r;var e=C(b,void 0);if(e.text!==a){e=e.text=a;for(let g=1;g<arguments.length;g+=1)e=
(0,arguments[g])(e);b.data!==e&&(b.data=e)}return b}}(P,P.w),P.w))&&O.X&&Object.prototype.hasOwnProperty.call(O,"default");var ra=O.attributes,sa=O.G,Ma=O.T,Na=O.V,Oa=O.P,Pa=O.W,Qa=O.H,Ra=O.I,Sa=O.text;
function Ta(f,c,d,l){var k;c[0]=0;for(var n=1;n<c.length;n++){var h=c[n++],m=c[n]?(c[0]|=h?1:2,d[c[n++]]):c[++n];3===h?l[0]=m:4===h?l[1]=Object.assign(l[1]||{},m):5===h?(l[1]=l[1]||{})[c[++n]]=m:6===h?l[1][c[++n]]+=m+"":h?(k=f.apply(m,Ta(f,m,d,["",null])),l.push(k),m[0]?c[0]|=2:(c[n-2]=0,c[n]=k)):l.push(m)}return l}var Ua=new Map;function Va(f){Array.isArray(f)&&(f={children:f});return f}
let Wa=function(f){var c=Ua.get(this);return c||(c=new Map,Ua.set(this,c)),1<(c=Ta(this,c.get(f)||(c.set(f,c=function(d){function l(x){1===h&&(x||(m=m.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?u.push(0,x,m):3===h&&(x||m)?(u.push(3,x,m),h=2):2===h&&"..."===m&&x?u.push(4,x,0):2===h&&m&&!x?u.push(5,0,!0,m):5<=h&&((m||!x&&5===h)&&(u.push(h,0,m,n),h=6),x&&(u.push(h,x,0,n),h=6));m=""}for(var k,n,h=1,m="",v="",u=[0],y=0;y<d.length;y++){y&&(1===h&&l(),l(y));for(var H=0;H<d[y].length;H++)k=d[y][H],1===h?"<"===
k?(l(),u=[u],h=3):m+=k:4===h?"--"===m&&">"===k?(h=1,m=""):m=k+m[0]:v?k===v?v="":m+=k:'"'===k||"'"===k?v=k:">"===k?(l(),h=1):h&&("="===k?(h=5,n=m,m=""):"/"===k&&(5>h||">"===d[y][H+1])?(l(),3===h&&(u=u[0]),h=u,(u=u[0]).push(2,0,h),h=0):" "===k||"\t"===k||"\n"===k||"\r"===k?(l(),h=2):m+=k),3===h&&"!--"===m&&(h=4,u=u[0])}return l(),u}(f)),c),arguments,[])).length?c:c[0]}.bind(function(f,c,...d){return{type:f,b:c,children:d}}),Q=new WeakMap,Xa=ra[Pa.default];
function X(f,c){let d=Q.get(f);f.classList.remove(d.state);d.state=c;"transition-visibile"!==c&&f.classList.add(d.state)}ra[Pa.default]=(f,c,d)=>{if("."===c[0])d&&(f[c.substr(1)]=d);else if("@"===c[0]){if(!Q.has(f)){let l={...d};Q.set(f,l);X(f,"transition-start");l.M&&J(()=>{X(f,"transition-fade-in");l.id=setTimeout(()=>{X(f,"transition-visibile")},l.M)},250)}}else Xa(f,c,d)};
function Ya(f,c){let {b:d,type:l}=f;return c&&(d.key||d.id)&&c.children.find(k=>(k.b.key&&k.b.key===d.key||k.b.id&&k.b.id===d.id)&&k.type===l)?!0:!1}
function Za(f,c){if(f){f=Va(f);let {type:d,children:l,b:k}=f,n=sa();for(;Q.has(n);){let h=n,m=Q.get(h);if(d===h.tagName.toLowerCase()||Ya(f,c)){if("transition-fade-out"===m.state||"transition-end"===m.state)clearTimeout(m.id),X(h,"transition-visibile");break}else Na(),"transition-fade-in"===m.state&&clearTimeout(m.id),"transition-fade-out"!==m.state&&"transition-end"!==m.state&&m.D?(X(h,"transition-fade-out"),J(()=>{m.id=setTimeout(()=>{X(h,"transition-end");J(()=>{h.parentNode&&(h.parentNode.removeChild(h),
Q.delete(h))})},m.D)})):m.D||(h.parentNode.removeChild(h),Q.delete(h));n=sa()}d&&Ra(d,null,null,...k?Object.keys(k).reduce((h,m)=>{h.push(m,k[m]);return h},[]):[]);l.forEach(h=>{h instanceof Object?"function"===typeof h?h():Za(h,f):(h||Number(h)===h)&&Sa(h)});d&&Qa(d)}}let kb=new WeakSet;function lb(f){if(!kb.has(f)){kb.add(f);for(var c=0;c<f.childNodes.length;c++){var d=f.childNodes[c];3!==d.nodeType||/\S/.test(d.nodeValue)?1===d.nodeType&&lb(d):(f.removeChild(d),c--)}}}
function mb(f,c){lb(f);J(()=>{Ma(f,function(){Za(c)})})}let nb=Oa.g;Oa.g=function(f){f.forEach(function(c){ob(c);nb&&nb(c)})};let Y;function pb(f){if(!Y)throw Error(`You can only call ${f} during setup!`);}let qb=Symbol("init");function rb(f,c=!1){J(()=>{let d=f.s,l=f.A(),k=d===qb||!l;!k&&l&&0<l.length&&(!l||!d||l.length!==d.length||-1<l.findIndex((n,h)=>n!==d[h]))&&(k=!0);f.s=l;k&&(f.c&&f.c(),f.c=f.v())},c?0:5E3)}
let Z=new WeakMap,sb=(f,c)=>{if(!Z.has(f)){const d=new MutationObserver(l=>{for(const k of l)"attributes"===k.type&&c(k.attributeName,f.getAttribute(k.attributeName))});Z.set(f,d)}};function tb(f,c){let d=[];return N({},()=>{},{set:(l,k,n)=>{l[k]!==n&&d.includes(k)&&c();return n},get:(l,k)=>{l[k]||(l[k]=f[k]||void 0);d.includes(k)||(d.push(k),Object.defineProperty(f,k,{get:()=>l[k],set:n=>{l[k]!==n&&(l[k]=n,c())}}))}})}
function ub(f,c){let d=[],l=N({},()=>{},{set:(k,n,h)=>{k[n]!==h&&(J(()=>{f.setAttribute(n,h)}),c());return h},get:(k,n)=>{k[n]||(k[n]=f.getAttribute(n)||void 0);d.includes(n)||d.push(n);return k[n]}});sb(f,(k,n)=>{d.includes(k)&&(l[k]=n)});return l}let vb=new WeakMap;function ob(f){if(f=vb.get(f))f.u.forEach(c=>c.c&&c.c()),f.m.forEach(c=>c.c&&c.c())}
function component(f,c){customElements.define(f,class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});let d={u:[],m:[],K:()=>this};vb.set(this,d);let l=!1,k=!1;d.a=!0;d.f=()=>{l?d.a||(k=!0):(l=!0,J(()=>{d.U();l=!1;k&&(k=!1,d.f())},d.a?0:5E3))};d.U=()=>{d.a&&(d.J=c(d.state),Y=d);let n=Va(d.J.next().value||[]);Y=void 0;n.children.push(()=>{d.u.forEach(h=>rb(h,d.a));d.m.forEach(h=>rb(h,!0));l=!1;d.a&&Z.has(this)&&Z.get(this).observe(this,{attributes:!0});d.a=!1;k&&(k=
!1,d.f())});mb(this.shadowRoot,n)}}connectedCallback(){let d=vb.get(this);d.connected||(d.a&&(d.state=qa({attributes:ub(this,()=>d.f()),b:tb(this,()=>d.f())})),d.connected=!0,d.S=d.state.C(()=>{d.f()}),d.f())}disconnectedCallback(){let d=vb.get(this);d.connected&&(d.connected=!1,d.S(),Z.has(this)&&Z.get(this).disconnect())}})};function getElement(){pb("layoutEffect");return Y.K()};function layoutEffect(f,c=()=>{}){pb("layoutEffect");Y.m.push({v:f,A:c,s:qb})};
function sideEffect(f,c=()=>{}){pb("sideEffect");Y.u.push({v:f,A:c,s:qb})};export{qa as $state,component,getElement,Wa as html,layoutEffect,N as proxify,mb as render,J as schedule,sideEffect}
