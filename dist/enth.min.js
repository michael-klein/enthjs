let v=new WeakSet;function A(c,a,b={}){let e=!1,g=()=>{e&&a()};Object.keys(c).forEach(b=>{"object"!==typeof c[b]||v.has(c[b])||(c[b]=A(c[b],a))});let l=new Proxy(c,{get:(a,g)=>{b.get&&b.get(a,g);return a[g]},set:(c,l,r)=>{b.set&&(r=b.set(c,l,r));"object"!==typeof r||v.has(r)||(r=A(r,g));c[l]===r&&e||"__$p"===l||"on"===l||(c[l]=r,e&&a());c[l]=r;return!0}});v.add(l);e=!0;return l}
let da=c=>{let a=[],b=!0;const e=A(c,()=>{b&&a.forEach(a=>a(e))});e.on=b=>{a.push(b);return()=>{const c=a.indexOf(b);-1<c&&a.splice(c,1)}};e.merge=a=>{const c=a=>{Object.keys(a).forEach(b=>{["on","merge"].includes(b)||(e[b]=a[b])})};a.on(a=>{c(a)});b=!1;c(a);b=!0};return e},B=[],F=!1,G={IMMEDIATE:0,USER_BLOCKING:250,NORMAL:5E3,LOW:1E4,IDLE:99999999},N=[],ea=(c,a)=>{let b=0;for(let e=c.length;b<e;b++){for(;0<N.length;)N.shift()();const g=Date.now()-a,[e,h]=c[b];if(a>=h||17>g)e();else break}return c.slice(b)},
fa=()=>{const c=Date.now();for(B=ea(B.sort((a,b)=>a[1]<b[1]?-1:1),c);0<N.length;)N.shift()();0<B.length?requestAnimationFrame(fa):F=!1},O=(c,a=G.NORMAL)=>{if(a===G.IMMEDIATE)F?N.push(c):c();else return new Promise(b=>{B.push([()=>{c();b()},Date.now()+a]);F||(requestAnimationFrame(fa),F=!0)});return Promise.resolve()};var P,Q=void 0;
(P=(Q={exports:{}},function(c,a){function b(d){if(!d)throw Error("Expected value to be defined");return d}function e(d){if(!V)throw Error("Cannot call "+d+"() unless in patch.");}function g(d){if(H)throw Error(d+"() can not be called between elementOpenStart() and elementOpenEnd().");}function l(d){if(W)throw Error(d+"() may not be called inside an element that has called skip().");}function h(d){if(!H)throw Error(d+"() can only be called after calling elementOpenStart().");}function k(d){let f=H;
H=d;return f}function r(d){let f=W;W=d;return f}function n(){}function p(d,f){for(;d.length>f;)d.pop()}function y(d,f,a){if(null==a)d.removeAttribute(f);else{var u=0===f.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===f.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":null;u?d.setAttributeNS(u,f,String(a)):d.setAttribute(f,String(a))}}function z(d,f,a){(I[f]||I[X.default])(d,f,a)}function Y(d,f,a,b){f=new Ja(f,a,b);return d.__incrementalDOMData=f}function w(d,f){if(d.__incrementalDOMData)return d.__incrementalDOMData;
var a=1===d.nodeType?d.localName:d.nodeName,b=ha;b=1===d.nodeType&&null!=b?d.getAttribute(b):null;f=Y(d,a,1===d.nodeType?b||f:null);if(1===d.nodeType&&(a=d.attributes,b=a.length)){d=f.getAttrsArr(b);for(let f=0,u=0;f<b;f+=1,u+=2){let b=a[f],c=b.value;d[u]=b.name;d[u+1]=c}}return f}function ia(d){w(d);for(d=d.firstChild;d;d=d.nextSibling)ia(d)}function ja(d){d.__incrementalDOMData=null;for(d=d.firstChild;d;d=d.nextSibling)ja(d)}function ka(d,f,a,b,c){return f==a&&b==c}function la(d,f,a){for(;f!==a;){let a=
f.nextSibling;d.removeChild(f);x.markDeleted(f);f=a}}function R(){return m?m.nextSibling:q.firstChild}function ma(){la(q,R(),null);m=q;q=q.parentNode}function na(){m=R()}function Z(d,f){na();a:{if(m){var a=m;do{{var b=a;var c=d,g=f;let u=w(b,g);b=S(b,c,u.nameOrCtor,g,u.key)}if(b)break a}while(f&&(a=a.nextSibling))}a=null}a||("#text"===d?(d=J.createTextNode(""),Y(d,"#text",null)):(a=J,b=q,a="function"===typeof d?new d:(b="svg"===d?"http://www.w3.org/2000/svg":"math"===d?"http://www.w3.org/1998/Math/MathML":
null==b||"foreignObject"===w(b,void 0).nameOrCtor?null:b.namespaceURI)?a.createElementNS(b,d):a.createElement(d),Y(a,d,f),d=a),x.markCreated(d),a=d);d=a;if(d!==m){if(0<=T.indexOf(d))for(f=q,a=d.nextSibling,b=m;null!==b&&b!==d;)c=b.nextSibling,f.insertBefore(b,a),b=c;else q.insertBefore(d,m);m=d}}function oa(d,a){Z(d,a);q=m;m=null;return q}function pa(){r(!1);ma();return m}function aa(){e("currentElement");g("currentElement");return q}function qa(d,a={}){let {matches:f=ka}=a;return(a,c,u)=>{const g=
x,e=J,Ia=T,l=D,h=K,Ka=m,n=q,z=S;J=a.ownerDocument;x=new La;S=f;D=[];K=[];m=null;q=a.parentNode;var C=q;var p;var t=Ma.call(a);if((p=11===t.nodeType||9===t.nodeType?t.activeElement:null)&&a.contains(p)){for(t=[];p!==C;)p=b(p),t.push(p),p=p.parentNode;C=t}else C=[];T=C;C=k(!1);t=r(!1);V=null!=x;try{const f=d(a,c,u);if(H)throw Error("elementOpenEnd() must be called after calling elementOpenStart().");return f}finally{x.notifyChanges(),J=e,x=g,S=z,D=l,K=h,m=Ka,q=n,T=Ia,k(C),r(t),V=null!=x}}}function ra(d){return qa((d,
a,b)=>{q=m=d;m=null;a(b);ma();if(m!==d){a=m;for(b=[];a&&a!==d;)b.push(a.nodeName.toLowerCase()),a=a.parentNode;throw Error("One or more tags were not closed:\n"+b.join("\n"));}return d},d)}function sa(d){return qa((d,a,c)=>{let f={nextSibling:d},g,u;g=d.nextSibling;u=d.previousSibling;m=f;a(c);q||console.warn("patchOuter requires the node have a parent if there is a key.");{c=m;a=b(f);c=b(c);let d=c.nextSibling===a.nextSibling&&c.previousSibling===u;if((c.nextSibling!==g||c.previousSibling!==u)&&
!d&&c!==a)throw Error("There must be exactly one top level call corresponding to the patched element.");}q&&la(q,R(),d.nextSibling);return f===m?null:m},d)}function ba(d,a,b,c){t.push(d);t.push(a);t.push(b);t.push(c)}function ta(d,a){let b=K;{a=a.getAttrsArr(b.length);var f=!a.length;let e=0;for(;e<b.length;e+=2){var c=b[e];if(f)a[e]=c;else if(a[e]!==c)break;let g=b[e+1];if(f||a[e+1]!==g)a[e+1]=g,ba(z,d,c,g)}if(e<b.length||e<a.length){for(e=f=e;e<a.length;e+=2)L[a[e]]=a[e+1];for(e=f;e<b.length;e+=
2)f=b[e],c=b[e+1],L[f]!==c&&ba(z,d,f,c),a[e]=f,a[e+1]=c,delete L[f];p(a,b.length);for(var g in L)ba(z,d,g,void 0),delete L[g]}d=ca;ca=g=t.length;for(a=d;a<g;a+=4)(0,t[a])(t[a+1],t[a+2],t[a+3]);ca=d;p(t,d)}p(b,0)}function ua(a,b,c){if(!b.staticsApplied&&(b.staticsApplied=!0,c&&c.length))if(b.hasEmptyAttrsArr())for(var d=0;d<c.length;d+=2)z(a,c[d],c[d+1]);else{for(var f=0;f<c.length;f+=2)E[c[f]]=f+1;b=b.getAttrsArr(0);f=0;for(let a=0;a<b.length;a+=2){let d=b[a],e=b[a+1],g=E[d];g?c[g]===e&&delete E[d]:
(b[f]=d,b[f+1]=e,f+=2)}p(b,f);for(d in E)z(a,d,c[E[d]]),delete E[d]}}function va(a,b,c){let d=D;g("elementOpenStart");k(!0);d[0]=a;d[1]=b;d[2]=c}function wa(a,b){let d=K;e("attr");d.push(a);d.push(b)}function xa(){let a=D;h("elementOpenEnd");k(!1);let b=oa(a[0],a[1]),c=w(b,void 0);ua(b,c,a[2]);ta(b,c);p(a,0);return b}function ya(a,b,c,...e){g("elementOpen");l("elementOpen");va(a,b,c);for(e=3;e<arguments.length;e+=2)wa(arguments[e],arguments[e+1]);return xa()}function za(a){g("elementClose");let d=
pa();var b=w(d,void 0).nameOrCtor;if(b!==a)throw Error('Received a call to close "'+a+'" but "'+b+'" was open.');return d}Object.defineProperty(a,"__esModule",{value:!0});let ha="key",H=!1,W=!1,V=!1,Na=Object.prototype.hasOwnProperty;n.prototype=Object.create(null);let X={default:"__default"},I=new n;I[X.default]=function(a,b,c){let d=typeof c;"object"===d||"function"===d?a[b]=c:y(a,b,c)};I.style=function(a,c,e){b("style"in a);a=a.style;if("string"===typeof e)a.cssText=e;else{a.cssText="";for(let b in e)if(Na.call(e,
b)){c=a;var d=b,g=e[b];0<=d.indexOf("-")?c.setProperty(d,g):c[d]=g}}};let M={nodesCreated:null,nodesDeleted:null};class La{constructor(){this.created=[];this.deleted=[]}markCreated(a){this.created.push(a)}markDeleted(a){this.deleted.push(a)}notifyChanges(){M.nodesCreated&&0<this.created.length&&M.nodesCreated(this.created);M.nodesDeleted&&0<this.deleted.length&&M.nodesDeleted(this.deleted)}}let Ma="undefined"!==typeof Node&&Node.prototype.getRootNode||function(){let a=this,b=a;for(;a;)b=a,a=a.parentNode;
return b};class Ja{constructor(a,b,c){this._attrsArr=null;this.staticsApplied=!1;this.nameOrCtor=a;this.key=b;this.text=c}hasEmptyAttrsArr(){let a=this._attrsArr;return!a||!a.length}getAttrsArr(a){var b;(b=this._attrsArr)||(a=Array(a),p(a,0),b=this._attrsArr=a);return b}}let x=null,m=null,q=null,J=null,T=[],S=ka,D=[],K=[];c=ra();let Oa=sa(),t=[],ca=0,L=new n,E=new n;a.applyAttr=y;a.applyProp=function(a,b,c){a[b]=c};a.attributes=I;a.alignWithDOM=Z;a.close=pa;a.createPatchInner=ra;a.createPatchOuter=
sa;a.currentElement=aa;a.currentPointer=function(){e("currentPointer");g("currentPointer");return R()};a.open=oa;a.patch=c;a.patchInner=c;a.patchOuter=Oa;a.skip=function(){if(null!==m)throw Error("skip() must come before any child declarations inside the current element.");r(!0);m=q.lastChild};a.skipNode=na;a.setKeyAttributeName=function(a){ha=a};a.clearCache=ja;a.getKey=function(a){b(a.__incrementalDOMData);return w(a,void 0).key};a.importNode=ia;a.isDataInitialized=function(a){return!!a.__incrementalDOMData};
a.notifications=M;a.symbols=X;a.applyAttrs=function(){let a=aa(),b=w(a,void 0);ta(a,b)};a.applyStatics=function(a){let b=aa(),d=w(b,void 0);ua(b,d,a)};a.attr=wa;a.elementClose=za;a.elementOpen=ya;a.elementOpenEnd=xa;a.elementOpenStart=va;a.elementVoid=function(a,b,c,...e){ya.apply(null,arguments);return za(a)};a.key=function(a){let d=D;h("key");b(d);d[1]=a};a.text=function(a,...b){g("text");l("text");Z("#text",null);b=m;var d=w(b,void 0);if(d.text!==a){d=d.text=a;for(let a=1;a<arguments.length;a+=
1)d=(0,arguments[a])(d);b.data!==d&&(b.data=d)}return b}}(Q,Q.exports),Q.exports))&&P.__esModule&&Object.prototype.hasOwnProperty.call(P,"default");var Aa=P.attributes,Ba=P.patch,Ca=P.symbols,Da=P.elementClose,Ea=P.elementOpen,Fa=P.text;
function Ga(c,a,b,e){var g;a[0]=0;for(var l=1;l<a.length;l++){var h=a[l++],k=a[l]?(a[0]|=h?1:2,b[a[l++]]):a[++l];3===h?e[0]=k:4===h?e[1]=Object.assign(e[1]||{},k):5===h?(e[1]=e[1]||{})[a[++l]]=k:6===h?e[1][a[++l]]+=k+"":h?(g=c.apply(k,Ga(c,k,b,["",null])),e.push(g),k[0]?a[0]|=2:(a[l-2]=0,a[l]=g)):e.push(k)}return e}var Ha=new Map;function Pa(c){Array.isArray(c)&&(c={children:c});return c}
let Qa=function(c){var a=Ha.get(this);return a||(a=new Map,Ha.set(this,a)),1<(a=Ga(this,a.get(c)||(a.set(c,a=function(a){function b(a){1===h&&(a||(k=k.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?n.push(0,a,k):3===h&&(a||k)?(n.push(3,a,k),h=2):2===h&&"..."===k&&a?n.push(4,a,0):2===h&&k&&!a?n.push(5,0,!0,k):5<=h&&((k||!a&&5===h)&&(n.push(h,0,k,l),h=6),a&&(n.push(h,a,0,l),h=6));k=""}for(var c,l,h=1,k="",r="",n=[0],p=0;p<a.length;p++){p&&(1===h&&b(),b(p));for(var y=0;y<a[p].length;y++)c=a[p][y],1===h?"<"===
c?(b(),n=[n],h=3):k+=c:4===h?"--"===k&&">"===c?(h=1,k=""):k=c+k[0]:r?c===r?r="":k+=c:'"'===c||"'"===c?r=c:">"===c?(b(),h=1):h&&("="===c?(h=5,l=k,k=""):"/"===c&&(5>h||">"===a[p][y+1])?(b(),3===h&&(n=n[0]),h=n,(n=n[0]).push(2,0,h),h=0):" "===c||"\t"===c||"\n"===c||"\r"===c?(b(),h=2):k+=c),3===h&&"!--"===k&&(h=4,n=n[0])}return b(),n}(c)),a),arguments,[])).length?a:a[0]}.bind(function(c,a,...b){return{type:c,props:a,children:b}}),Ra=Aa[Ca.default];
Aa[Ca.default]=(c,a,b)=>{"."===a[0]?b&&(c[a.substr(1)]=b):Ra(c,a,b)};function Sa(c){c=Pa(c);if("function"===typeof c)c();else if("object"!==typeof c)(c||Number(c)===c)&&Fa(c);else{let {type:a,children:b,props:e}=c;"function"===typeof a?a():(a&&Ea(a,null,null,...e?Object.keys(e).flatMap(a=>[a,e[a]]):[]),b.forEach(Sa),a&&Da(a))}}function Ta(c,a,b=!1){O(()=>Ba(c,function(){Sa(a,b)}))}let Ua=Symbol("init");
function Va(c,a=!1){O(()=>{let a=c.prevDeps,e=c.getDeps(),g=a===Ua||!e;!g&&e&&0<e.length&&(!e||!a||e.length!==a.length||-1<e.findIndex((b,c)=>b!==a[c]))&&(g=!0);c.prevDeps=e;g&&(c.cleanUp&&c.cleanUp(),c.cleanUp=c.cb())},a?G.IMMEDIATE:G.NORMAL)}let U=new WeakMap,Wa=(c,a)=>{if(!U.has(c)){const b=new MutationObserver(b=>{for(const e of b)"attributes"===e.type&&a(e.attributeName,c.getAttribute(e.attributeName))});U.set(c,b)}};
function Xa(c,a){let b=[];return A({},()=>{},{set:(c,g,l)=>{c[g]!==l&&b.includes(g)&&a();return l},get:(e,g)=>{e[g]||(e[g]=c[g]||void 0);b.includes(g)||(b.push(g),Object.defineProperty(c,g,{get:()=>e[g],set:b=>{e[g]!==b&&(e[g]=b,a())}}))}})}function Ya(c,a){let b=[],e=A({},()=>{},{set:(b,e,h)=>{b[e]!==h&&(O(()=>{c.setAttribute(e,h)}),a());return h},get:(a,e)=>{a[e]||(a[e]=c.getAttribute(e)||void 0);b.includes(e)||b.push(e);return a[e]}});Wa(c,(a,c)=>{b.includes(a)&&(e[a]=c)});return e}let Za=new WeakMap;

function component(c,a){customElements.define(c,class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});let b={sideEffects:[]};Za.set(this,b);let c=!1,g=!1;b.init=!0;b.queueRender=()=>{c?g=!0:(c=!0,O(()=>{b.render();c=!1;g&&(g=!1,b.queueRender())},b.init?G.IMMEDIATE:G.NORMAL))};b.render=()=>{b.init&&(b.generator=a(b.state));let e=Pa(b.generator.next().value||[]);e.children.push(()=>{b.sideEffects.forEach(a=>Va(a,b.init));c=!1;b.init&&U.has(this)&&U.get(this).observe(this,{attributes:!0});
b.init=!1;g&&(g=!1,b.queueRender())});Ta(this.shadowRoot,e)}}connectedCallback(){let a=Za.get(this);a.connected||(a.init&&(a.state=da({attributes:Ya(this,()=>a.queueRender()),props:Xa(this,()=>a.queueRender())})),a.connected=!0,a.off=a.state.on(()=>{a.queueRender()}),a.queueRender())}disconnectedCallback(){let a=Za.get(this);a.connected&&(a.connected=!1,a.off(),U.has(this)&&U.get(this).disconnect())}})};export{da as $state,component,Qa as html,A as proxify,Ta as render}
