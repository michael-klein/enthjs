{"version":3,"sources":["node_modules/monaco-editor/esm/vs/language/typescript/workerManager.js","node_modules/monaco-editor/esm/vs/language/typescript/languageFeatures.js","node_modules/monaco-editor/esm/vs/language/typescript/tsMode.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","WorkerManager","modeId","defaults","_this","_modeId","_defaults","_worker","_client","_configChangeListener","onDidChange","_stopWorker","_updateExtraLibsToken","_extraLibsChangeListener","onDidExtraLibsChange","_updateExtraLibs","prototype","dispose","myToken","proxy","_a","getProxy","updateExtraLibs","getExtraLibs","_getClient","monaco","editor","createWebWorker","moduleId","keepIdleModels","createData","compilerOptions","getCompilerOptions","extraLibs","p","getEagerModelSync","worker","withSyncedResources","getModels","filter","model","getModeId","map","uri","getLanguageServiceWorker","resources","_i","arguments","client","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","__","constructor","create","Uri","Range","IndentStyle","flattenDiagnosticMessageText","diag","newLine","indent","undefined","i","messageText","kid","displayPartsToString","displayParts","displayPart","text","join","Adapter","_textSpanToRange","span","p1","getPositionAt","start","p2","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","DiagnosticCategory","DiagnosticsAdapter","_super","_selector","_disposables","_listener","onModelAdd","handle","changeSubscription","onDidChangeContent","clearTimeout","setTimeout","_doValidate","toString","onModelRemoved","setModelMarkers","key","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","recomputeDiagostics","forEach","promises","noSyntaxValidation","noSemanticValidation","noSuggestionDiagnostics","diagnostics","markers","_b","isDisposed","getDiagnosticsOptions","getSyntacticDiagnostics","getSemanticDiagnostics","getSuggestionDiagnostics","all","reduce","c","concat","diagnosticCodesToIgnore","indexOf","code","_convertDiagnostics","diagStart","diagLength","severity","_tsDiagnosticCategoryToMarkerSeverity","category","message","tags","reportsUnnecessary","MarkerTag","Unnecessary","relatedInformation","_convertRelatedInformation","info","relatedResource","file","relatedResourceUri","parse","fileName","getModel","infoStart","infoLength","resource","Error","MarkerSeverity","Message","Info","Warning","Suggestion","Hint","SuggestAdapter","defineProperty","get","enumerable","configurable","provideCompletionItems","position","_context","token","wordInfo","wordRange","offset","suggestions","getWordUntilPosition","getOffsetAt","getCompletionsAtPosition","entries","entry","range","replacementSpan","name","insertText","sortText","kind","convertKind","resolveCompletionItem","_position","item","myItem","details","getCompletionEntryDetails","detail","documentation","Kind","primitiveType","keyword","languages","CompletionItemKind","Keyword","variable","localVariable","Variable","memberVariable","memberGetAccessor","memberSetAccessor","Field","function","memberFunction","constructSignature","callSignature","indexSignature","Function","enum","Enum","module","Module","class","Class","interface","Interface","warning","File","Property","SignatureHelpAdapter","signatureHelpTriggerCharacters","provideSignatureHelp","ret","getSignatureHelpItems","activeSignature","selectedItemIndex","activeParameter","argumentIndex","signatures","items","signature","parameters","prefixDisplayParts","a","parameter","separatorDisplayParts","suffixDisplayParts","QuickInfoAdapter","provideHover","contents","getQuickInfoAtPosition","tag","match","textSpan","OccurrencesAdapter","provideDocumentHighlights","getOccurrencesAtPosition","isWriteAccess","DocumentHighlightKind","Write","Text","DefinitionAdapter","provideDefinition","entries_1","refModel","getDefinitionAtPosition","ReferenceAdapter","provideReferences","context","entries_2","getReferencesAtPosition","OutlineAdapter","provideDocumentSymbols","convert","getNavigationBarItems","bucket","containerLabel","outlineTypeTable","SymbolKind","spans","selectionRange","containerName","childItems","child","unknown","script","type","localFunction","constructorImplementation","typeParameter","alias","const","let","Method","FormatHelper","_convertOptions","options","ConvertTabsToSpaces","insertSpaces","TabSize","tabSize","IndentSize","Smart","NewLineCharacter","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","PlaceOpenBraceOnNewLineForControlBlocks","PlaceOpenBraceOnNewLineForFunctions","_convertTextChanges","change","newText","FormatAdapter","provideDocumentRangeFormattingEdits","startOffset","endOffset","edits","getFormattingEditsForRange","edit","FormatOnTypeAdapter","provideOnTypeFormattingEdits","ch","getFormattingEditsAfterKeystroke","CodeActionAdaptor","provideCodeActions","end","formatOptions","errorCodes","codeFixes","actions","getOptions","m","Number","getCodeFixesAtPosition","fix","changes","isNewFile","_tsCodeFixActionToMonacoCodeAction","codeFix","textChanges","tc","action","title","description","RenameAdapter","provideRenameEdits","newName","renameInfo","renameLocations","fileNameToResourceTextEditMap","renameLocations_1","renameLocation","resourceTextEdit","getRenameInfo","allowRenameOfImportPath","canRename","rejectReason","localizedErrorMessage","fileToRename","findRenameLocations","javaScriptWorker","typeScriptWorker","setupTypeScript","setupMode","setupJavaScript","getJavaScriptWorker","getTypeScriptWorker","first","more","registerCompletionItemProvider","languageFeatures","registerSignatureHelpProvider","registerHoverProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","registerCodeActionProvider","registerRenameProvider"],"mappings":"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SzGC,KAAT,CAAeC,KAAf,EAAsB;AAAE,WAAOA,KAAK,YAAYH,CAAjB,GAAqBG,KAArB,GAA6B,IAAIH,CAAJ,CAAM,UAAUI,OAAV,EAAmB;AAAEA,ACCnFA,AFTAI,IESAJ,AFTAI,ECQmFJ,EDR/E,CAAC,CAACH,CESC,CAAC6Y,CDDkF,CAAC3Y,KAAD,ADR3E,CCQoE,EDRjEF,MESX,CAAP,EFT2B,CAACc,KAAV,CAAgBjB,OAAhB,EAAyBC,UAAU,IAAI,EAAvC,CAAb,EAAyDU,IAAzD,EAAD,CAAJ;ACQoG,ACEvG,AFTA,GEIM,AFTA,CESP,AFTA,CCY4D,CAApC;AAAoF,ACG/G,AFTA,CARD;;ACeI,ACGG,AFTP,IAAIO,KCMO,ACGKoY,KDHApZ,CAAC,ADNF,GAAI,ECMGA,CAAC,GAAGK,ICGnB,AFToB,GCMV,ACGqB,CDH3B,EAAyB,GDNJW,OCMcZ,IDN5B,GCMkB,CDNY,CCMOE,MAAnB,EAA2B,CDNLR,OAAV,EAAmBmB,IAAnB,EAAyB;ACOjE,ACGJ,AFTA,MAAIC,CAAC,EESE,CFTC,GCMKX,ACGFF,OAAJ,CAAY,CDHf,CAAmBF,KAAnB,EAA0B,CCGDC,OAAV,EAAmBE,MAAnB,EAA2B;ADHd,ACI5B,AFVMa,IAAAA,IEUF,CAAC4X,AFVM,CCMqB,CDNnB,CAAT,aEUJ,EAAuB;ADJWvY,ACK9B,AFXYY,IAAAA,ICMkBZ,ADNd,EAAE,ECMgB,CAACP,ACK5BK,MAAM,CAAC,EDL8B,ADNf,CCMgBG,IAAV,CAAeN,KAAf,CAAD,CAAJ,aCKjB,CAAb;ADL4D,ACM/D,AFZkC,OCMP,CAAqC,EDN1BkB,CAAC,CAAC,CAAD,CAAD,CCMiCX,CAAP,CDNnB,CCM6B,ADNxC,EAAc,MAAMW,CAAC,CAAC,CAAD,CAAP;ACM4Bf,ADNhB,QCMgBA,KDNTe,CCMe,ADNd,CCMeX,ADNd,CCMa,ADNd,CCMQ,ADNhB;ACM4B,ACOzFN,AFb2E,IEa3EA,CFbI,MEaG,CAAC2Y,gBAAD,CAAP;ADP2F,ACQ9F,AFdgFzX,GES1E,CAAP,AFTiFA,IAAI,EAAE,EAA/E;AEeX,AFf8FC,IAAAA,GAAG,EAAE;ACO5F,ADPI,GAAR,UCOaZ,QAAT,CAAkBR,KAAlB,EAAyB;AAAE,ACSnC,AFhBI,MAAsGqB,CAAtG,EEgBKyX,CDT8B,QCSvC,CAAmBzW,QAAnB,EAA6BD,MAA7B,EAAqC;ADTI/B,ACUrC,AFjBA,MEiBI6E,AFjBqG5D,CAAzG,CCOqCjB,IAAI,ACU/B,CDVgCP,ECU7B,IAAIqC,GDVkC,CAAC,OAAD,CAAT,CAAmBnC,KAAnB,CAAD,CAAJ,QCUxB,CAAkBoC,MAAlB,EAA0BC,QAA1B,CAAb;ADVuE,ADPvE,MAA4GnB,CCO7E,ADP/B,CCOwE,OAAOX,CAAP,EAAU;AAAEJ,ACWpF,AFlBA,MEkBImE,AFlB2G/C,CAA/G,CCOoFpB,ICW1E,EDXgF,CAACI,ACW9E,CDX6E,CAAN,QCW7D2Y,KAAV,EAAiB;ADXkE,ACY5F,AFlBJ,QEkBQC,CFlBD5X,CAAC,EEkBI,CFlBD,EEkBI,EAAX;ADZ8F,ADNrFjB,IAAAA,IAAI,EAAEkB,IAAI,CAAC,CAAD,CAAZ;AEmBP,AFnBwB,SEmBnB,IAAIwD,AFnBwBxD,EEmBtB,EFnB0B,CEmBvB,AFnBwB,CEmBtC,AFnBqC,CAA9B,CEmBUwD,EAAE,GAAGC,SAAS,CAAChD,MAAhC,EAAwC+C,EAAE,EAA1C,EAA8C;ADZ9C,ACaImU,AFpBsC,MEoBtCA,IAAI,CAACnU,EDbA3E,ACaE,CFpByCmB,EEoBtC,CDbd,ACaQ,CDbMf,ACaV,AFpBoD,CAAC,CAAD,CEoBrCwE,GDbnB,EAAsB,ICaM,CAACD,EAAD,CAAxB;ADboBvE,ACcvB,AFrBM,GAAJ,EAA4D,CCOvCA,MAAM,ADPwCgB,CCOvCf,IAAP,CDPuC,ECOzBT,GDP2C,ICOpC,CAACQ,KDPiB,CCOX,CAACT,GDP2CuB,CAAC,CCOpD,ADPqDE,CCO1E,GAAsC1B,EDP0C,CAAC2B,ECOtC,CAACjB,KDP6B,CCOvB,ADPsB,CCOrBT,EDP0C,GCOlD,CAAL,CAAoBW,IAApB,CAAyBP,EDPyC,OCOlE,EAAoCI,QAApC,CAAtC;AAAsF,ADPoB,WAAO,IAAP;AEsBlI,AFtBgJ,GAAjF,CAA5D,EAAgJe,CAAvJ,IEsBW2D,MAAM,CAACJ,wB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","file":"tsMode.36fe6354.js","sourceRoot":"..","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(modeId, defaults) {\r\n        var _this = this;\r\n        this._modeId = modeId;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._client = null;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n        this._updateExtraLibsToken = 0;\r\n        this._extraLibsChangeListener = this._defaults.onDidExtraLibsChange(function () { return _this._updateExtraLibs(); });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        this._configChangeListener.dispose();\r\n        this._extraLibsChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._updateExtraLibs = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var myToken, proxy;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._worker) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        myToken = ++this._updateExtraLibsToken;\r\n                        return [4 /*yield*/, this._worker.getProxy()];\r\n                    case 1:\r\n                        proxy = _a.sent();\r\n                        if (this._updateExtraLibsToken !== myToken) {\r\n                            // avoid multiple calls\r\n                            return [2 /*return*/];\r\n                        }\r\n                        proxy.updateExtraLibs(this._defaults.getExtraLibs());\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        var _this = this;\r\n        if (!this._client) {\r\n            this._worker = monaco.editor.createWebWorker({\r\n                // module that exports the create() method and returns a `TypeScriptWorker` instance\r\n                moduleId: 'vs/language/typescript/tsWorker',\r\n                label: this._modeId,\r\n                keepIdleModels: true,\r\n                // passed in to the create() method\r\n                createData: {\r\n                    compilerOptions: this._defaults.getCompilerOptions(),\r\n                    extraLibs: this._defaults.getExtraLibs()\r\n                }\r\n            });\r\n            var p = this._worker.getProxy();\r\n            if (this._defaults.getEagerModelSync()) {\r\n                p = p.then(function (worker) {\r\n                    if (_this._worker) {\r\n                        return _this._worker.withSyncedResources(monaco.editor.getModels()\r\n                            .filter(function (model) { return model.getModeId() === _this._modeId; })\r\n                            .map(function (model) { return model.uri; }));\r\n                    }\r\n                    return worker;\r\n                });\r\n            }\r\n            this._client = p;\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient().then(function (client) {\r\n            _client = client;\r\n        }).then(function (_) {\r\n            if (_this._worker) {\r\n                return _this._worker.withSyncedResources(resources);\r\n            }\r\n        }).then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar Uri = monaco.Uri;\r\nvar Range = monaco.Range;\r\n//#region utils copied from typescript to prevent loading the entire typescriptServices ---\r\nvar IndentStyle;\r\n(function (IndentStyle) {\r\n    IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\r\n    IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\r\n    IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\r\n})(IndentStyle || (IndentStyle = {}));\r\nexport function flattenDiagnosticMessageText(diag, newLine, indent) {\r\n    if (indent === void 0) { indent = 0; }\r\n    if (typeof diag === \"string\") {\r\n        return diag;\r\n    }\r\n    else if (diag === undefined) {\r\n        return \"\";\r\n    }\r\n    var result = \"\";\r\n    if (indent) {\r\n        result += newLine;\r\n        for (var i = 0; i < indent; i++) {\r\n            result += \"  \";\r\n        }\r\n    }\r\n    result += diag.messageText;\r\n    indent++;\r\n    if (diag.next) {\r\n        for (var _i = 0, _a = diag.next; _i < _a.length; _i++) {\r\n            var kid = _a[_i];\r\n            result += flattenDiagnosticMessageText(kid, newLine, indent);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction displayPartsToString(displayParts) {\r\n    if (displayParts) {\r\n        return displayParts.map(function (displayPart) { return displayPart.text; }).join(\"\");\r\n    }\r\n    return \"\";\r\n}\r\n//#endregion\r\nvar Adapter = /** @class */ (function () {\r\n    function Adapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    // protected _positionToOffset(model: monaco.editor.ITextModel, position: monaco.IPosition): number {\r\n    // \treturn model.getOffsetAt(position);\r\n    // }\r\n    // protected _offsetToPosition(model: monaco.editor.ITextModel, offset: number): monaco.IPosition {\r\n    // \treturn model.getPositionAt(offset);\r\n    // }\r\n    Adapter.prototype._textSpanToRange = function (model, span) {\r\n        var p1 = model.getPositionAt(span.start);\r\n        var p2 = model.getPositionAt(span.start + span.length);\r\n        var startLineNumber = p1.lineNumber, startColumn = p1.column;\r\n        var endLineNumber = p2.lineNumber, endColumn = p2.column;\r\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\r\n    };\r\n    return Adapter;\r\n}());\r\nexport { Adapter };\r\n// --- diagnostics --- ---\r\nvar DiagnosticCategory;\r\n(function (DiagnosticCategory) {\r\n    DiagnosticCategory[DiagnosticCategory[\"Warning\"] = 0] = \"Warning\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Error\"] = 1] = \"Error\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Suggestion\"] = 2] = \"Suggestion\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Message\"] = 3] = \"Message\";\r\n})(DiagnosticCategory || (DiagnosticCategory = {}));\r\nvar DiagnosticsAdapter = /** @class */ (function (_super) {\r\n    __extends(DiagnosticsAdapter, _super);\r\n    function DiagnosticsAdapter(_defaults, _selector, worker) {\r\n        var _this = _super.call(this, worker) || this;\r\n        _this._defaults = _defaults;\r\n        _this._selector = _selector;\r\n        _this._disposables = [];\r\n        _this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            if (model.getModeId() !== _selector) {\r\n                return;\r\n            }\r\n            var handle;\r\n            var changeSubscription = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model); }, 500);\r\n            });\r\n            _this._listener[model.uri.toString()] = {\r\n                dispose: function () {\r\n                    changeSubscription.dispose();\r\n                    clearTimeout(handle);\r\n                }\r\n            };\r\n            _this._doValidate(model);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            monaco.editor.setModelMarkers(model, _this._selector, []);\r\n            var key = model.uri.toString();\r\n            if (_this._listener[key]) {\r\n                _this._listener[key].dispose();\r\n                delete _this._listener[key];\r\n            }\r\n        };\r\n        _this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\r\n        _this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\r\n        _this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        _this._disposables.push({\r\n            dispose: function () {\r\n                for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                    var model = _a[_i];\r\n                    onModelRemoved(model);\r\n                }\r\n            }\r\n        });\r\n        var recomputeDiagostics = function () {\r\n            // redo diagnostics when options change\r\n            for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                var model = _a[_i];\r\n                onModelRemoved(model);\r\n                onModelAdd(model);\r\n            }\r\n        };\r\n        _this._disposables.push(_this._defaults.onDidChange(recomputeDiagostics));\r\n        _this._disposables.push(_this._defaults.onDidExtraLibsChange(recomputeDiagostics));\r\n        monaco.editor.getModels().forEach(onModelAdd);\r\n        return _this;\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (model) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var worker, promises, _a, noSyntaxValidation, noSemanticValidation, noSuggestionDiagnostics, diagnostics, markers;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this._worker(model.uri)];\r\n                    case 1:\r\n                        worker = _b.sent();\r\n                        if (model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        promises = [];\r\n                        _a = this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation, noSuggestionDiagnostics = _a.noSuggestionDiagnostics;\r\n                        if (!noSyntaxValidation) {\r\n                            promises.push(worker.getSyntacticDiagnostics(model.uri.toString()));\r\n                        }\r\n                        if (!noSemanticValidation) {\r\n                            promises.push(worker.getSemanticDiagnostics(model.uri.toString()));\r\n                        }\r\n                        if (!noSuggestionDiagnostics) {\r\n                            promises.push(worker.getSuggestionDiagnostics(model.uri.toString()));\r\n                        }\r\n                        return [4 /*yield*/, Promise.all(promises)];\r\n                    case 2:\r\n                        diagnostics = _b.sent();\r\n                        if (!diagnostics || model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        markers = diagnostics\r\n                            .reduce(function (p, c) { return c.concat(p); }, [])\r\n                            .filter(function (d) { return (_this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore || []).indexOf(d.code) === -1; })\r\n                            .map(function (d) { return _this._convertDiagnostics(model, d); });\r\n                        monaco.editor.setModelMarkers(model, this._selector, markers);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DiagnosticsAdapter.prototype._convertDiagnostics = function (model, diag) {\r\n        var diagStart = diag.start || 0;\r\n        var diagLength = diag.length || 1;\r\n        var _a = model.getPositionAt(diagStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n        var _b = model.getPositionAt(diagStart + diagLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n        return {\r\n            severity: this._tsDiagnosticCategoryToMarkerSeverity(diag.category),\r\n            startLineNumber: startLineNumber,\r\n            startColumn: startColumn,\r\n            endLineNumber: endLineNumber,\r\n            endColumn: endColumn,\r\n            message: flattenDiagnosticMessageText(diag.messageText, '\\n'),\r\n            code: diag.code.toString(),\r\n            tags: diag.reportsUnnecessary ? [monaco.MarkerTag.Unnecessary] : [],\r\n            relatedInformation: this._convertRelatedInformation(model, diag.relatedInformation),\r\n        };\r\n    };\r\n    DiagnosticsAdapter.prototype._convertRelatedInformation = function (model, relatedInformation) {\r\n        if (!relatedInformation) {\r\n            return;\r\n        }\r\n        var result = [];\r\n        relatedInformation.forEach(function (info) {\r\n            var relatedResource = model;\r\n            if (info.file) {\r\n                var relatedResourceUri = monaco.Uri.parse(info.file.fileName);\r\n                relatedResource = monaco.editor.getModel(relatedResourceUri);\r\n            }\r\n            if (!relatedResource) {\r\n                return;\r\n            }\r\n            var infoStart = info.start || 0;\r\n            var infoLength = info.length || 1;\r\n            var _a = relatedResource.getPositionAt(infoStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n            var _b = relatedResource.getPositionAt(infoStart + infoLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n            result.push({\r\n                resource: relatedResource.uri,\r\n                startLineNumber: startLineNumber,\r\n                startColumn: startColumn,\r\n                endLineNumber: endLineNumber,\r\n                endColumn: endColumn,\r\n                message: flattenDiagnosticMessageText(info.messageText, '\\n')\r\n            });\r\n        });\r\n        return result;\r\n    };\r\n    DiagnosticsAdapter.prototype._tsDiagnosticCategoryToMarkerSeverity = function (category) {\r\n        switch (category) {\r\n            case DiagnosticCategory.Error: return monaco.MarkerSeverity.Error;\r\n            case DiagnosticCategory.Message: return monaco.MarkerSeverity.Info;\r\n            case DiagnosticCategory.Warning: return monaco.MarkerSeverity.Warning;\r\n            case DiagnosticCategory.Suggestion: return monaco.MarkerSeverity.Hint;\r\n        }\r\n        return monaco.MarkerSeverity.Info;\r\n    };\r\n    return DiagnosticsAdapter;\r\n}(Adapter));\r\nexport { DiagnosticsAdapter };\r\nvar SuggestAdapter = /** @class */ (function (_super) {\r\n    __extends(SuggestAdapter, _super);\r\n    function SuggestAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return ['.'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestAdapter.prototype.provideCompletionItems = function (model, position, _context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var wordInfo, wordRange, resource, offset, worker, info, suggestions;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        wordInfo = model.getWordUntilPosition(position);\r\n                        wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCompletionsAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        suggestions = info.entries.map(function (entry) {\r\n                            var range = wordRange;\r\n                            if (entry.replacementSpan) {\r\n                                var p1 = model.getPositionAt(entry.replacementSpan.start);\r\n                                var p2 = model.getPositionAt(entry.replacementSpan.start + entry.replacementSpan.length);\r\n                                range = new Range(p1.lineNumber, p1.column, p2.lineNumber, p2.column);\r\n                            }\r\n                            return {\r\n                                uri: resource,\r\n                                position: position,\r\n                                range: range,\r\n                                label: entry.name,\r\n                                insertText: entry.name,\r\n                                sortText: entry.sortText,\r\n                                kind: SuggestAdapter.convertKind(entry.kind)\r\n                            };\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                suggestions: suggestions\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SuggestAdapter.prototype.resolveCompletionItem = function (model, _position, item, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var myItem, resource, position, offset, worker, details;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        myItem = item;\r\n                        resource = myItem.uri;\r\n                        position = myItem.position;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCompletionEntryDetails(resource.toString(), offset, myItem.label)];\r\n                    case 2:\r\n                        details = _a.sent();\r\n                        if (!details || model.isDisposed()) {\r\n                            return [2 /*return*/, myItem];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                uri: resource,\r\n                                position: position,\r\n                                label: details.name,\r\n                                kind: SuggestAdapter.convertKind(details.kind),\r\n                                detail: displayPartsToString(details.displayParts),\r\n                                documentation: {\r\n                                    value: displayPartsToString(details.documentation)\r\n                                }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SuggestAdapter.convertKind = function (kind) {\r\n        switch (kind) {\r\n            case Kind.primitiveType:\r\n            case Kind.keyword:\r\n                return monaco.languages.CompletionItemKind.Keyword;\r\n            case Kind.variable:\r\n            case Kind.localVariable:\r\n                return monaco.languages.CompletionItemKind.Variable;\r\n            case Kind.memberVariable:\r\n            case Kind.memberGetAccessor:\r\n            case Kind.memberSetAccessor:\r\n                return monaco.languages.CompletionItemKind.Field;\r\n            case Kind.function:\r\n            case Kind.memberFunction:\r\n            case Kind.constructSignature:\r\n            case Kind.callSignature:\r\n            case Kind.indexSignature:\r\n                return monaco.languages.CompletionItemKind.Function;\r\n            case Kind.enum:\r\n                return monaco.languages.CompletionItemKind.Enum;\r\n            case Kind.module:\r\n                return monaco.languages.CompletionItemKind.Module;\r\n            case Kind.class:\r\n                return monaco.languages.CompletionItemKind.Class;\r\n            case Kind.interface:\r\n                return monaco.languages.CompletionItemKind.Interface;\r\n            case Kind.warning:\r\n                return monaco.languages.CompletionItemKind.File;\r\n        }\r\n        return monaco.languages.CompletionItemKind.Property;\r\n    };\r\n    return SuggestAdapter;\r\n}(Adapter));\r\nexport { SuggestAdapter };\r\nvar SignatureHelpAdapter = /** @class */ (function (_super) {\r\n    __extends(SignatureHelpAdapter, _super);\r\n    function SignatureHelpAdapter() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.signatureHelpTriggerCharacters = ['(', ','];\r\n        return _this;\r\n    }\r\n    SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, info, ret;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getSignatureHelpItems(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        ret = {\r\n                            activeSignature: info.selectedItemIndex,\r\n                            activeParameter: info.argumentIndex,\r\n                            signatures: []\r\n                        };\r\n                        info.items.forEach(function (item) {\r\n                            var signature = {\r\n                                label: '',\r\n                                parameters: []\r\n                            };\r\n                            signature.documentation = displayPartsToString(item.documentation);\r\n                            signature.label += displayPartsToString(item.prefixDisplayParts);\r\n                            item.parameters.forEach(function (p, i, a) {\r\n                                var label = displayPartsToString(p.displayParts);\r\n                                var parameter = {\r\n                                    label: label,\r\n                                    documentation: displayPartsToString(p.documentation)\r\n                                };\r\n                                signature.label += label;\r\n                                signature.parameters.push(parameter);\r\n                                if (i < a.length - 1) {\r\n                                    signature.label += displayPartsToString(item.separatorDisplayParts);\r\n                                }\r\n                            });\r\n                            signature.label += displayPartsToString(item.suffixDisplayParts);\r\n                            ret.signatures.push(signature);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                value: ret,\r\n                                dispose: function () { }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SignatureHelpAdapter;\r\n}(Adapter));\r\nexport { SignatureHelpAdapter };\r\n// --- hover ------\r\nvar QuickInfoAdapter = /** @class */ (function (_super) {\r\n    __extends(QuickInfoAdapter, _super);\r\n    function QuickInfoAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, info, documentation, tags, contents;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getQuickInfoAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        documentation = displayPartsToString(info.documentation);\r\n                        tags = info.tags ? info.tags.map(function (tag) {\r\n                            var label = \"*@\" + tag.name + \"*\";\r\n                            if (!tag.text) {\r\n                                return label;\r\n                            }\r\n                            return label + (tag.text.match(/\\r\\n|\\n/g) ? ' \\n' + tag.text : \" - \" + tag.text);\r\n                        }).join('  \\n\\n') : '';\r\n                        contents = displayPartsToString(info.displayParts);\r\n                        return [2 /*return*/, {\r\n                                range: this._textSpanToRange(model, info.textSpan),\r\n                                contents: [{\r\n                                        value: '```js\\n' + contents + '\\n```\\n'\r\n                                    }, {\r\n                                        value: documentation + (tags ? '\\n\\n' + tags : '')\r\n                                    }]\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return QuickInfoAdapter;\r\n}(Adapter));\r\nexport { QuickInfoAdapter };\r\n// --- occurrences ------\r\nvar OccurrencesAdapter = /** @class */ (function (_super) {\r\n    __extends(OccurrencesAdapter, _super);\r\n    function OccurrencesAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getOccurrencesAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, entries.map(function (entry) {\r\n                                return {\r\n                                    range: _this._textSpanToRange(model, entry.textSpan),\r\n                                    kind: entry.isWriteAccess ? monaco.languages.DocumentHighlightKind.Write : monaco.languages.DocumentHighlightKind.Text\r\n                                };\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OccurrencesAdapter;\r\n}(Adapter));\r\nexport { OccurrencesAdapter };\r\n// --- definition ------\r\nvar DefinitionAdapter = /** @class */ (function (_super) {\r\n    __extends(DefinitionAdapter, _super);\r\n    function DefinitionAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries, result, _i, entries_1, entry, uri, refModel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getDefinitionAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        result = [];\r\n                        for (_i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n                            entry = entries_1[_i];\r\n                            uri = Uri.parse(entry.fileName);\r\n                            refModel = monaco.editor.getModel(uri);\r\n                            if (refModel) {\r\n                                result.push({\r\n                                    uri: uri,\r\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\r\n                                });\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return DefinitionAdapter;\r\n}(Adapter));\r\nexport { DefinitionAdapter };\r\n// --- references ------\r\nvar ReferenceAdapter = /** @class */ (function (_super) {\r\n    __extends(ReferenceAdapter, _super);\r\n    function ReferenceAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries, result, _i, entries_2, entry, uri, refModel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getReferencesAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        result = [];\r\n                        for (_i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\r\n                            entry = entries_2[_i];\r\n                            uri = Uri.parse(entry.fileName);\r\n                            refModel = monaco.editor.getModel(uri);\r\n                            if (refModel) {\r\n                                result.push({\r\n                                    uri: uri,\r\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\r\n                                });\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ReferenceAdapter;\r\n}(Adapter));\r\nexport { ReferenceAdapter };\r\n// --- outline ------\r\nvar OutlineAdapter = /** @class */ (function (_super) {\r\n    __extends(OutlineAdapter, _super);\r\n    function OutlineAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, worker, items, convert, result;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getNavigationBarItems(resource.toString())];\r\n                    case 2:\r\n                        items = _a.sent();\r\n                        if (!items || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        convert = function (bucket, item, containerLabel) {\r\n                            var result = {\r\n                                name: item.text,\r\n                                detail: '',\r\n                                kind: (outlineTypeTable[item.kind] || monaco.languages.SymbolKind.Variable),\r\n                                range: _this._textSpanToRange(model, item.spans[0]),\r\n                                selectionRange: _this._textSpanToRange(model, item.spans[0]),\r\n                                tags: [],\r\n                                containerName: containerLabel\r\n                            };\r\n                            if (item.childItems && item.childItems.length > 0) {\r\n                                for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\r\n                                    var child = _a[_i];\r\n                                    convert(bucket, child, result.name);\r\n                                }\r\n                            }\r\n                            bucket.push(result);\r\n                        };\r\n                        result = [];\r\n                        items.forEach(function (item) { return convert(result, item); });\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OutlineAdapter;\r\n}(Adapter));\r\nexport { OutlineAdapter };\r\nvar Kind = /** @class */ (function () {\r\n    function Kind() {\r\n    }\r\n    Kind.unknown = '';\r\n    Kind.keyword = 'keyword';\r\n    Kind.script = 'script';\r\n    Kind.module = 'module';\r\n    Kind.class = 'class';\r\n    Kind.interface = 'interface';\r\n    Kind.type = 'type';\r\n    Kind.enum = 'enum';\r\n    Kind.variable = 'var';\r\n    Kind.localVariable = 'local var';\r\n    Kind.function = 'function';\r\n    Kind.localFunction = 'local function';\r\n    Kind.memberFunction = 'method';\r\n    Kind.memberGetAccessor = 'getter';\r\n    Kind.memberSetAccessor = 'setter';\r\n    Kind.memberVariable = 'property';\r\n    Kind.constructorImplementation = 'constructor';\r\n    Kind.callSignature = 'call';\r\n    Kind.indexSignature = 'index';\r\n    Kind.constructSignature = 'construct';\r\n    Kind.parameter = 'parameter';\r\n    Kind.typeParameter = 'type parameter';\r\n    Kind.primitiveType = 'primitive type';\r\n    Kind.label = 'label';\r\n    Kind.alias = 'alias';\r\n    Kind.const = 'const';\r\n    Kind.let = 'let';\r\n    Kind.warning = 'warning';\r\n    return Kind;\r\n}());\r\nexport { Kind };\r\nvar outlineTypeTable = Object.create(null);\r\noutlineTypeTable[Kind.module] = monaco.languages.SymbolKind.Module;\r\noutlineTypeTable[Kind.class] = monaco.languages.SymbolKind.Class;\r\noutlineTypeTable[Kind.enum] = monaco.languages.SymbolKind.Enum;\r\noutlineTypeTable[Kind.interface] = monaco.languages.SymbolKind.Interface;\r\noutlineTypeTable[Kind.memberFunction] = monaco.languages.SymbolKind.Method;\r\noutlineTypeTable[Kind.memberVariable] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberGetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberSetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.const] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.localVariable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.function] = monaco.languages.SymbolKind.Function;\r\noutlineTypeTable[Kind.localFunction] = monaco.languages.SymbolKind.Function;\r\n// --- formatting ----\r\nvar FormatHelper = /** @class */ (function (_super) {\r\n    __extends(FormatHelper, _super);\r\n    function FormatHelper() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatHelper._convertOptions = function (options) {\r\n        return {\r\n            ConvertTabsToSpaces: options.insertSpaces,\r\n            TabSize: options.tabSize,\r\n            IndentSize: options.tabSize,\r\n            IndentStyle: IndentStyle.Smart,\r\n            NewLineCharacter: '\\n',\r\n            InsertSpaceAfterCommaDelimiter: true,\r\n            InsertSpaceAfterSemicolonInForStatements: true,\r\n            InsertSpaceBeforeAndAfterBinaryOperators: true,\r\n            InsertSpaceAfterKeywordsInControlFlowStatements: true,\r\n            InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\r\n            PlaceOpenBraceOnNewLineForControlBlocks: false,\r\n            PlaceOpenBraceOnNewLineForFunctions: false\r\n        };\r\n    };\r\n    FormatHelper.prototype._convertTextChanges = function (model, change) {\r\n        return {\r\n            text: change.newText,\r\n            range: this._textSpanToRange(model, change.span)\r\n        };\r\n    };\r\n    return FormatHelper;\r\n}(Adapter));\r\nexport { FormatHelper };\r\nvar FormatAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatAdapter, _super);\r\n    function FormatAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, startOffset, endOffset, worker, edits;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        startOffset = model.getOffsetAt({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n                        endOffset = model.getOffsetAt({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getFormattingEditsForRange(resource.toString(), startOffset, endOffset, FormatHelper._convertOptions(options))];\r\n                    case 2:\r\n                        edits = _a.sent();\r\n                        if (!edits || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FormatAdapter;\r\n}(FormatHelper));\r\nexport { FormatAdapter };\r\nvar FormatOnTypeAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatOnTypeAdapter, _super);\r\n    function FormatOnTypeAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\r\n        get: function () {\r\n            return [';', '}', '\\n'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, edits;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getFormattingEditsAfterKeystroke(resource.toString(), offset, ch, FormatHelper._convertOptions(options))];\r\n                    case 2:\r\n                        edits = _a.sent();\r\n                        if (!edits || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FormatOnTypeAdapter;\r\n}(FormatHelper));\r\nexport { FormatOnTypeAdapter };\r\n// --- code actions ------\r\nvar CodeActionAdaptor = /** @class */ (function (_super) {\r\n    __extends(CodeActionAdaptor, _super);\r\n    function CodeActionAdaptor() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    CodeActionAdaptor.prototype.provideCodeActions = function (model, range, context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, start, end, formatOptions, errorCodes, worker, codeFixes, actions;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        start = model.getOffsetAt({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n                        end = model.getOffsetAt({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n                        formatOptions = FormatHelper._convertOptions(model.getOptions());\r\n                        errorCodes = context.markers.filter(function (m) { return m.code; }).map(function (m) { return m.code; }).map(Number);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCodeFixesAtPosition(resource.toString(), start, end, errorCodes, formatOptions)];\r\n                    case 2:\r\n                        codeFixes = _a.sent();\r\n                        if (!codeFixes || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        actions = codeFixes.filter(function (fix) {\r\n                            // Removes any 'make a new file'-type code fix\r\n                            return fix.changes.filter(function (change) { return change.isNewFile; }).length === 0;\r\n                        }).map(function (fix) {\r\n                            return _this._tsCodeFixActionToMonacoCodeAction(model, context, fix);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                actions: actions,\r\n                                dispose: function () { }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CodeActionAdaptor.prototype._tsCodeFixActionToMonacoCodeAction = function (model, context, codeFix) {\r\n        var _this = this;\r\n        var edits = codeFix.changes.map(function (edit) { return ({\r\n            resource: model.uri,\r\n            edits: edit.textChanges.map(function (tc) { return ({\r\n                range: _this._textSpanToRange(model, tc.span),\r\n                text: tc.newText\r\n            }); })\r\n        }); });\r\n        var action = {\r\n            title: codeFix.description,\r\n            edit: { edits: edits },\r\n            diagnostics: context.markers,\r\n            kind: \"quickfix\"\r\n        };\r\n        return action;\r\n    };\r\n    return CodeActionAdaptor;\r\n}(FormatHelper));\r\nexport { CodeActionAdaptor };\r\n// --- rename ----\r\nvar RenameAdapter = /** @class */ (function (_super) {\r\n    __extends(RenameAdapter, _super);\r\n    function RenameAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, fileName, offset, worker, renameInfo, renameLocations, fileNameToResourceTextEditMap, edits, _i, renameLocations_1, renameLocation, resourceTextEdit;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        fileName = resource.toString();\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getRenameInfo(fileName, offset, { allowRenameOfImportPath: false })];\r\n                    case 2:\r\n                        renameInfo = _a.sent();\r\n                        if (renameInfo.canRename === false) { // use explicit comparison so that the discriminated union gets resolved properly\r\n                            return [2 /*return*/, {\r\n                                    edits: [],\r\n                                    rejectReason: renameInfo.localizedErrorMessage\r\n                                }];\r\n                        }\r\n                        if (renameInfo.fileToRename !== undefined) {\r\n                            throw new Error(\"Renaming files is not supported.\");\r\n                        }\r\n                        return [4 /*yield*/, worker.findRenameLocations(fileName, offset, /*strings*/ false, /*comments*/ false, /*prefixAndSuffix*/ false)];\r\n                    case 3:\r\n                        renameLocations = _a.sent();\r\n                        if (!renameLocations || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        fileNameToResourceTextEditMap = {};\r\n                        edits = [];\r\n                        for (_i = 0, renameLocations_1 = renameLocations; _i < renameLocations_1.length; _i++) {\r\n                            renameLocation = renameLocations_1[_i];\r\n                            if (!(renameLocation.fileName in fileNameToResourceTextEditMap)) {\r\n                                resourceTextEdit = {\r\n                                    edits: [],\r\n                                    resource: monaco.Uri.parse(renameLocation.fileName)\r\n                                };\r\n                                fileNameToResourceTextEditMap[renameLocation.fileName] = resourceTextEdit;\r\n                                edits.push(resourceTextEdit);\r\n                            }\r\n                            fileNameToResourceTextEditMap[renameLocation.fileName].edits.push({\r\n                                range: this._textSpanToRange(model, renameLocation.textSpan),\r\n                                text: newName\r\n                            });\r\n                        }\r\n                        return [2 /*return*/, { edits: edits }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RenameAdapter;\r\n}(Adapter));\r\nexport { RenameAdapter };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nvar javaScriptWorker;\r\nvar typeScriptWorker;\r\nexport function setupTypeScript(defaults) {\r\n    typeScriptWorker = setupMode(defaults, 'typescript');\r\n}\r\nexport function setupJavaScript(defaults) {\r\n    javaScriptWorker = setupMode(defaults, 'javascript');\r\n}\r\nexport function getJavaScriptWorker() {\r\n    return new Promise(function (resolve, reject) {\r\n        if (!javaScriptWorker) {\r\n            return reject(\"JavaScript not registered!\");\r\n        }\r\n        resolve(javaScriptWorker);\r\n    });\r\n}\r\nexport function getTypeScriptWorker() {\r\n    return new Promise(function (resolve, reject) {\r\n        if (!typeScriptWorker) {\r\n            return reject(\"TypeScript not registered!\");\r\n        }\r\n        resolve(typeScriptWorker);\r\n    });\r\n}\r\nfunction setupMode(defaults, modeId) {\r\n    var client = new WorkerManager(modeId, defaults);\r\n    var worker = function (first) {\r\n        var more = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            more[_i - 1] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, [first].concat(more));\r\n    };\r\n    monaco.languages.registerCompletionItemProvider(modeId, new languageFeatures.SuggestAdapter(worker));\r\n    monaco.languages.registerSignatureHelpProvider(modeId, new languageFeatures.SignatureHelpAdapter(worker));\r\n    monaco.languages.registerHoverProvider(modeId, new languageFeatures.QuickInfoAdapter(worker));\r\n    monaco.languages.registerDocumentHighlightProvider(modeId, new languageFeatures.OccurrencesAdapter(worker));\r\n    monaco.languages.registerDefinitionProvider(modeId, new languageFeatures.DefinitionAdapter(worker));\r\n    monaco.languages.registerReferenceProvider(modeId, new languageFeatures.ReferenceAdapter(worker));\r\n    monaco.languages.registerDocumentSymbolProvider(modeId, new languageFeatures.OutlineAdapter(worker));\r\n    monaco.languages.registerDocumentRangeFormattingEditProvider(modeId, new languageFeatures.FormatAdapter(worker));\r\n    monaco.languages.registerOnTypeFormattingEditProvider(modeId, new languageFeatures.FormatOnTypeAdapter(worker));\r\n    monaco.languages.registerCodeActionProvider(modeId, new languageFeatures.CodeActionAdaptor(worker));\r\n    monaco.languages.registerRenameProvider(modeId, new languageFeatures.RenameAdapter(worker));\r\n    new languageFeatures.DiagnosticsAdapter(defaults, modeId, worker);\r\n    return worker;\r\n}\r\n"]}